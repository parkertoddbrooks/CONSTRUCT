# CONSTRUCT Development API Reference

**Last Updated**: Wed Jul  9 18:32:45 PDT 2025
**Generated by**: update-architecture.sh

## Library Functions API

### common-patterns

Common Script Patterns Library for CONSTRUCT

#### `get_script_dir()`

Usage: SCRIPT_DIR=$(get_script_dir)

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/common-patterns.sh"
get_script_dir [parameters]
```

#### `get_construct_root()`

Usage: CONSTRUCT_ROOT=$(get_construct_root)

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/common-patterns.sh"
get_construct_root [parameters]
```

#### `get_construct_dev()`

Usage: CONSTRUCT_DEV=$(get_construct_dev) 

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/common-patterns.sh"
get_construct_dev [parameters]
```

#### `get_script_paths()`

Standard script directory resolution pattern (legacy - use individual functions above)

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/common-patterns.sh"
get_script_paths [parameters]
```

#### `find_shell_scripts()`

Common file finding pattern for shell scripts

**Parameters:**
- `$1` - search_dir

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/common-patterns.sh"
find_shell_scripts [parameters]
```

#### `safe_grep_count()`

Common grep pattern with error handling

**Parameters:**
- `$1` - pattern
- `$2` - file

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/common-patterns.sh"
safe_grep_count [parameters]
```

#### `find_shell_scripts_in()`

Common pattern: find shell scripts in directory

**Parameters:**
- `$1` - search_dir

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/common-patterns.sh"
find_shell_scripts_in [parameters]
```

#### `count_shell_scripts()`

Common pattern: count shell scripts

**Parameters:**
- `$1` - search_dir

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/common-patterns.sh"
count_shell_scripts [parameters]
```

#### `find_yaml_files_in()`

Common pattern: find yaml files  

**Parameters:**
- `$1` - search_dir

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/common-patterns.sh"
find_yaml_files_in [parameters]
```

#### `count_yaml_files()`

Common pattern: count yaml files

**Parameters:**
- `$1` - search_dir

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/common-patterns.sh"
count_yaml_files [parameters]
```

#### `create_temp_dir()`

Create and manage temporary directory

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/common-patterns.sh"
create_temp_dir [parameters]
```

#### `cleanup_temp_dir()`

Cleanup temporary directory

**Parameters:**
- `$1` - temp_dir

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/common-patterns.sh"
cleanup_temp_dir [parameters]
```

#### `create_structure_dirs()`

Standard structure directory creation

**Parameters:**
- `$1` - structure_dir

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/common-patterns.sh"
create_structure_dirs [parameters]
```

#### `archive_existing_files()`

Move existing files to old directory

**Parameters:**
- `$1` - structure_dir
- `$2` - pattern

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/common-patterns.sh"
archive_existing_files [parameters]
```

#### `get_repo_info()`

Sets: REPO_NAME and REMOTE_URL

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/common-patterns.sh"
get_repo_info [parameters]
```

---

### file-analysis

File Analysis Library for CONSTRUCT

#### `find_swift_files()`

Find all Swift files in a directory

**Parameters:**
- `$1` - directory

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/file-analysis.sh"
find_swift_files [parameters]
```

#### `find_viewmodels()`

Extract ViewModels from Swift files

**Parameters:**
- `$1` - directory

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/file-analysis.sh"
find_viewmodels [parameters]
```

#### `find_views()`

Extract Views from Swift files

**Parameters:**
- `$1` - directory

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/file-analysis.sh"
find_views [parameters]
```

#### `find_services()`

Extract Services from Swift files

**Parameters:**
- `$1` - directory

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/file-analysis.sh"
find_services [parameters]
```

#### `find_hardcoded_values()`

Check for hardcoded values in Swift files

**Parameters:**
- `$1` - directory

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/file-analysis.sh"
find_hardcoded_values [parameters]
```

#### `check_mvvm_violations()`

Check for MVVM violations

**Parameters:**
- `$1` - directory

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/file-analysis.sh"
check_mvvm_violations [parameters]
```

#### `count_components()`

Count components by type

**Parameters:**
- `$1` - directory

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/file-analysis.sh"
count_components [parameters]
```

#### `find_design_tokens()`

Extract design tokens usage

**Parameters:**
- `$1` - directory

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/file-analysis.sh"
find_design_tokens [parameters]
```

#### `generate_architecture_summary()`

Generate architecture summary

**Parameters:**
- `$1` - directory
- `$2` - output_file

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/file-analysis.sh"
generate_architecture_summary [parameters]
```

#### `validate_mvvm_structure()`

Check if directory follows MVVM structure

**Parameters:**
- `$1` - directory

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/file-analysis.sh"
validate_mvvm_structure [parameters]
```

---

### interactive-support

Interactive Support Library

#### `should_show_prompts()`

Usage: if should_show_prompts "$@"; then

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/interactive-support.sh"
should_show_prompts [parameters]
```

#### `is_claude_prompts_mode()`

Returns: 0 if claude prompts mode, 1 otherwise

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/interactive-support.sh"
is_claude_prompts_mode [parameters]
```

#### `is_interactive()`

Returns: 0 if interactive, 1 if non-interactive

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/interactive-support.sh"
is_interactive [parameters]
```

#### `show_script_prompts()`

Usage: show_script_prompts "$(basename "$0")" show_my_prompts

**Parameters:**
- `$1` - script_name
- `$2` - prompt_function

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/interactive-support.sh"
show_script_prompts [parameters]
```

#### `get_input_with_default()`

Usage: VAR=$(get_input_with_default "Enter name" "default")

**Parameters:**
- `$1` - prompt
- `$2` - default

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/interactive-support.sh"
get_input_with_default [parameters]
```

#### `select_with_default()`

Usage: OPT=$(select_with_default "Choose type" "ios,web,api" "ios")

**Parameters:**
- `$1` - prompt
- `$2` - options
- `$3` - default

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/interactive-support.sh"
select_with_default [parameters]
```

#### `yes_no_prompt()`

Usage: if [ "$(yes_no_prompt "Continue?" "y")" = "y" ]; then

**Parameters:**
- `$1` - prompt
- `$2` - default

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/interactive-support.sh"
yes_no_prompt [parameters]
```

#### `multi_select()`

Usage: PLUGINS=$(multi_select "Choose plugins" "swift,mvvm,api" "swift")

**Parameters:**
- `$1` - prompt
- `$2` - available
- `$3` - defaults

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/interactive-support.sh"
multi_select [parameters]
```

#### `show_info()`

Usage: show_info "Processing files..."

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/interactive-support.sh"
show_info [parameters]
```

#### `show_success()`

Usage: show_success "Project created successfully"

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/interactive-support.sh"
show_success [parameters]
```

#### `show_error()`

Usage: show_error "Failed to create project"

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/interactive-support.sh"
show_error [parameters]
```

#### `show_warning()`

Usage: show_warning "Using default configuration"

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/interactive-support.sh"
show_warning [parameters]
```

#### `list_directory_options()`

Usage: THEMES=$(list_directory_options "themes/" ".css")

**Parameters:**
- `$1` - dir

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/interactive-support.sh"
list_directory_options [parameters]
```

---

### template-location

Template Location Library

#### `get_ai_template_dir()`

Returns: Path to AI template directory

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-location.sh"
get_ai_template_dir [parameters]
```

#### `get_project_templates_dir()`

Returns: Path to project templates directory

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-location.sh"
get_project_templates_dir [parameters]
```

#### `get_component_templates_dir()`

Returns: Path to component templates directory

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-location.sh"
get_component_templates_dir [parameters]
```

#### `get_pattern_templates_dir()`

Returns: Path to pattern templates directory

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-location.sh"
get_pattern_templates_dir [parameters]
```

#### `ai_template_exists()`

Returns: 0 if exists, 1 if not

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-location.sh"
ai_template_exists [parameters]
```

#### `get_project_template_path()`

Returns: Path to specific project template

**Parameters:**
- `$1` - template_name

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-location.sh"
get_project_template_path [parameters]
```

---

### template-utils

Template Utilities Library for CONSTRUCT

#### `get_construct_root()`

Get the CONSTRUCT root directory

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-utils.sh"
get_construct_root [parameters]
```

#### `get_template_dir()`

Get path to template directory

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-utils.sh"
get_template_dir [parameters]
```

#### `get_template_project_dir()`

Get the path to the template project structure

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-utils.sh"
get_template_project_dir [parameters]
```

#### `detect_context()`

Detect if we're in a user project or template context

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-utils.sh"
detect_context [parameters]
```

#### `get_project_context()`

Get project directories based on context

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-utils.sh"
get_project_context [parameters]
```

#### `validate_template_structure()`

Validate template structure (for template development)

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-utils.sh"
validate_template_structure [parameters]
```

#### `validate_user_project_structure()`

Validate user project structure (for actual user projects using dynamic detection)

**Parameters:**
- `$1` - project_root

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-utils.sh"
validate_user_project_structure [parameters]
```

#### `validate_template_integrity()`

Main validation function that determines context and validates appropriately

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-utils.sh"
validate_template_integrity [parameters]
```

#### `check_template_contamination()`

Check for template contamination (user-specific content in templates)

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-utils.sh"
check_template_contamination [parameters]
```

#### `test_template_independence()`

Test template independence (ensure templates work standalone)

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-utils.sh"
test_template_independence [parameters]
```

#### `get_template_scripts()`

Get available template scripts

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-utils.sh"
get_template_scripts [parameters]
```

#### `get_template_script_count()`

Get template script count

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-utils.sh"
get_template_script_count [parameters]
```

#### `validate_template_scripts()`

Validate template scripts have proper structure

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/template-utils.sh"
validate_template_scripts [parameters]
```

---

### validation

Validation Library for CONSTRUCT

#### `check_dependencies()`

Validate script has required dependencies

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/validation.sh"
check_dependencies [parameters]
```

#### `validate_directory()`

Validate directory exists and is readable

**Parameters:**
- `$1` - dir
- `$2` - description

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/validation.sh"
validate_directory [parameters]
```

#### `validate_file()`

Validate file exists and is readable

**Parameters:**
- `$1` - file
- `$2` - description

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/validation.sh"
validate_file [parameters]
```

#### `validate_script_syntax()`

Validate script syntax

**Parameters:**
- `$1` - script

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/validation.sh"
validate_script_syntax [parameters]
```

#### `validate_config_file()`

Validate configuration file format

**Parameters:**
- `$1` - config_file
- `$2` - format

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/validation.sh"
validate_config_file [parameters]
```

#### `validate_environment()`

Validate environment setup

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/validation.sh"
validate_environment [parameters]
```

#### `validate_project_structure()`

Validate project structure

**Parameters:**
- `$1` - project_dir
- `$2` - project_type

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/validation.sh"
validate_project_structure [parameters]
```

#### `generate_validation_report()`

Generate validation report

**Parameters:**
- `$1` - output_file
- `$2` - target_dir
- `$3` - project_type

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/validation.sh"
generate_validation_report [parameters]
```

#### `cleanup_on_exit()`

Exit handler for cleanup

**Usage:**
```bash
source "$CONSTRUCT_DEV/CONSTRUCT/lib/validation.sh"
cleanup_on_exit [parameters]
```

---

